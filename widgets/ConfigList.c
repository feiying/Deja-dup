/* ConfigList.c generated by valac 0.16.1, the Vala compiler
 * generated from ConfigList.vala, do not modify */

/* -*- Mode: Vala; indent-tabs-mode: nil; tab-width: 2 -*- */
/*
    This file is part of Déjà Dup.
    For copyright information, see AUTHORS.

    Déjà Dup is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Déjà Dup is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Déjà Dup.  If not, see <http://www.gnu.org/licenses/>.
*/

#include <glib.h>
#include <glib-object.h>
#include <gtk/gtk.h>
#include <stdlib.h>
#include <string.h>
#include <gio/gio.h>
#include <common.h>
#include <gdk/gdk.h>
#include <glib/gi18n-lib.h>
#include <atk/atk.h>


#define DEJA_DUP_TYPE_CONFIG_LIST_STORE (deja_dup_config_list_store_get_type ())
#define DEJA_DUP_CONFIG_LIST_STORE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), DEJA_DUP_TYPE_CONFIG_LIST_STORE, DejaDupConfigListStore))
#define DEJA_DUP_CONFIG_LIST_STORE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), DEJA_DUP_TYPE_CONFIG_LIST_STORE, DejaDupConfigListStoreClass))
#define DEJA_DUP_IS_CONFIG_LIST_STORE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), DEJA_DUP_TYPE_CONFIG_LIST_STORE))
#define DEJA_DUP_IS_CONFIG_LIST_STORE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), DEJA_DUP_TYPE_CONFIG_LIST_STORE))
#define DEJA_DUP_CONFIG_LIST_STORE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), DEJA_DUP_TYPE_CONFIG_LIST_STORE, DejaDupConfigListStoreClass))

typedef struct _DejaDupConfigListStore DejaDupConfigListStore;
typedef struct _DejaDupConfigListStoreClass DejaDupConfigListStoreClass;
typedef struct _DejaDupConfigListStorePrivate DejaDupConfigListStorePrivate;

#define DEJA_DUP_TYPE_CONFIG_WIDGET (deja_dup_config_widget_get_type ())
#define DEJA_DUP_CONFIG_WIDGET(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), DEJA_DUP_TYPE_CONFIG_WIDGET, DejaDupConfigWidget))
#define DEJA_DUP_CONFIG_WIDGET_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), DEJA_DUP_TYPE_CONFIG_WIDGET, DejaDupConfigWidgetClass))
#define DEJA_DUP_IS_CONFIG_WIDGET(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), DEJA_DUP_TYPE_CONFIG_WIDGET))
#define DEJA_DUP_IS_CONFIG_WIDGET_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), DEJA_DUP_TYPE_CONFIG_WIDGET))
#define DEJA_DUP_CONFIG_WIDGET_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), DEJA_DUP_TYPE_CONFIG_WIDGET, DejaDupConfigWidgetClass))

typedef struct _DejaDupConfigWidget DejaDupConfigWidget;
typedef struct _DejaDupConfigWidgetClass DejaDupConfigWidgetClass;

#define DEJA_DUP_TYPE_CONFIG_LIST (deja_dup_config_list_get_type ())
#define DEJA_DUP_CONFIG_LIST(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), DEJA_DUP_TYPE_CONFIG_LIST, DejaDupConfigList))
#define DEJA_DUP_CONFIG_LIST_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), DEJA_DUP_TYPE_CONFIG_LIST, DejaDupConfigListClass))
#define DEJA_DUP_IS_CONFIG_LIST(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), DEJA_DUP_TYPE_CONFIG_LIST))
#define DEJA_DUP_IS_CONFIG_LIST_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), DEJA_DUP_TYPE_CONFIG_LIST))
#define DEJA_DUP_CONFIG_LIST_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), DEJA_DUP_TYPE_CONFIG_LIST, DejaDupConfigListClass))

typedef struct _DejaDupConfigList DejaDupConfigList;
typedef struct _DejaDupConfigListClass DejaDupConfigListClass;
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
#define _g_free0(var) (var = (g_free (var), NULL))
#define __g_slist_free__g_free0_0(var) ((var == NULL) ? NULL : (var = (_g_slist_free__g_free0_ (var), NULL)))
#define _g_error_free0(var) ((var == NULL) ? NULL : (var = (g_error_free (var), NULL)))
typedef struct _DejaDupConfigWidgetPrivate DejaDupConfigWidgetPrivate;
typedef struct _DejaDupConfigListPrivate DejaDupConfigListPrivate;
#define _g_string_free0(var) ((var == NULL) ? NULL : (var = (g_string_free (var, TRUE), NULL)))
#define _g_variant_unref0(var) ((var == NULL) ? NULL : (var = (g_variant_unref (var), NULL)))
typedef struct _DejaDupConfigListSetFromConfigData DejaDupConfigListSetFromConfigData;
#define _gtk_tree_path_free0(var) ((var == NULL) ? NULL : (var = (gtk_tree_path_free (var), NULL)))
#define __g_list_free__g_free0_0(var) ((var == NULL) ? NULL : (var = (_g_list_free__g_free0_ (var), NULL)))
#define __g_list_free__gtk_tree_path_free0_0(var) ((var == NULL) ? NULL : (var = (_g_list_free__gtk_tree_path_free0_ (var), NULL)))

struct _DejaDupConfigListStore {
	GtkListStore parent_instance;
	DejaDupConfigListStorePrivate * priv;
};

struct _DejaDupConfigListStoreClass {
	GtkListStoreClass parent_class;
};

struct _DejaDupConfigListStorePrivate {
	DejaDupConfigList* _list;
};

struct _DejaDupConfigWidget {
	GtkEventBox parent_instance;
	DejaDupConfigWidgetPrivate * priv;
	gboolean syncing;
	DejaDupSimpleSettings* settings;
	GList* all_settings;
};

struct _DejaDupConfigWidgetClass {
	GtkEventBoxClass parent_class;
	void (*set_from_config) (DejaDupConfigWidget* self, GAsyncReadyCallback _callback_, gpointer _user_data_);
	void (*set_from_config_finish) (DejaDupConfigWidget* self, GAsyncResult* _res_);
};

struct _DejaDupConfigList {
	DejaDupConfigWidget parent_instance;
	DejaDupConfigListPrivate * priv;
};

struct _DejaDupConfigListClass {
	DejaDupConfigWidgetClass parent_class;
};

struct _DejaDupConfigListPrivate {
	GtkTreeView* tree;
	GtkToolButton* add_button;
	GtkToolButton* remove_button;
};

struct _DejaDupConfigListSetFromConfigData {
	int _state_;
	GObject* _source_object_;
	GAsyncResult* _res_;
	GSimpleAsyncResult* _async_result;
	DejaDupConfigList* self;
	DejaDupSimpleSettings* _tmp0_;
	const gchar* _tmp1_;
	const gchar* _tmp2_;
	GVariant* _tmp3_;
	GVariant* slist_val;
	GVariant* _tmp4_;
	size_t _tmp5_;
	const gchar** _tmp6_;
	const gchar** slist;
	gint slist_length1;
	gint _slist_size_;
	const gchar** _tmp7_;
	gint _tmp7__length1;
	gint _tmp8_;
	GFile** _tmp9_;
	GFile** list;
	gint list_length1;
	gint _list_size_;
	GtkListStore* model;
	GtkTreeView* _tmp10_;
	GtkListStore* _tmp11_;
	guint _tmp12_;
	GtkListStore* _tmp13_;
	GtkListStore* _tmp14_;
	gint i;
	gchar* _tmp15_;
	gchar* _tmp16_;
	GFile* _tmp17_;
	GFile* _tmp18_;
	GFile* trash;
	GFile** _tmp19_;
	gint _tmp19__length1;
	GFile** f_collection;
	gint f_collection_length1;
	gint _f_collection_size_;
	gint f_it;
	GFile* _tmp20_;
	GFile* f;
	GFile* _tmp21_;
	gchar* _tmp22_;
	gchar* s;
	GtkTreeIter iter;
	GtkListStore* _tmp23_;
	gint _tmp24_;
	GFile* _tmp25_;
	gchar* _tmp26_;
	gchar* _tmp27_;
	const gchar* _tmp28_;
	GtkTreeIter _tmp29_;
	GIcon* icon;
	GFile* _tmp30_;
	GFile* _tmp31_;
	gboolean _tmp32_;
	GThemedIcon* _tmp33_;
	GIcon* _tmp34_;
	GFile* _tmp35_;
	GFileInfo* _tmp36_;
	GFileInfo* info;
	GFileInfo* _tmp37_;
	GIcon* _tmp38_;
	GIcon* _tmp39_;
	GError* err;
	GError* _tmp40_;
	const gchar* _tmp41_;
	GIcon* _tmp42_;
	GtkListStore* _tmp43_;
	GtkTreeIter _tmp44_;
	GIcon* _tmp45_;
	GError * _inner_error_;
};


static gpointer deja_dup_config_list_store_parent_class = NULL;
static GtkTreeDragDestIface* deja_dup_config_list_store_gtk_tree_drag_dest_parent_iface = NULL;
static GtkTreeDragSourceIface* deja_dup_config_list_store_gtk_tree_drag_source_parent_iface = NULL;
static gpointer deja_dup_config_list_parent_class = NULL;

GType deja_dup_config_list_store_get_type (void) G_GNUC_CONST;
GType deja_dup_config_widget_get_type (void) G_GNUC_CONST;
GType deja_dup_config_list_get_type (void) G_GNUC_CONST;
#define DEJA_DUP_CONFIG_LIST_STORE_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), DEJA_DUP_TYPE_CONFIG_LIST_STORE, DejaDupConfigListStorePrivate))
enum  {
	DEJA_DUP_CONFIG_LIST_STORE_DUMMY_PROPERTY,
	DEJA_DUP_CONFIG_LIST_STORE_LIST
};
DejaDupConfigListStore* deja_dup_config_list_store_new (DejaDupConfigList* list);
DejaDupConfigListStore* deja_dup_config_list_store_construct (GType object_type, DejaDupConfigList* list);
static gboolean deja_dup_config_list_store_real_drag_data_received (GtkTreeDragDest* base, GtkTreePath* dest, GtkSelectionData* selection_data);
static void _g_free0_ (gpointer var);
static void _g_slist_free__g_free0_ (GSList* self);
DejaDupConfigList* deja_dup_config_list_store_get_list (DejaDupConfigListStore* self);
gboolean deja_dup_config_list_add_files (DejaDupConfigList* self, GSList* files);
static gboolean deja_dup_config_list_store_real_drag_data_get (GtkTreeDragSource* base, GtkTreePath* path, GtkSelectionData* selection_data);
static void deja_dup_config_list_store_set_list (DejaDupConfigListStore* self, DejaDupConfigList* value);
static GObject * deja_dup_config_list_store_constructor (GType type, guint n_construct_properties, GObjectConstructParam * construct_properties);
static void deja_dup_config_list_store_finalize (GObject* obj);
static void _vala_deja_dup_config_list_store_get_property (GObject * object, guint property_id, GValue * value, GParamSpec * pspec);
static void _vala_deja_dup_config_list_store_set_property (GObject * object, guint property_id, const GValue * value, GParamSpec * pspec);
#define DEJA_DUP_CONFIG_LIST_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), DEJA_DUP_TYPE_CONFIG_LIST, DejaDupConfigListPrivate))
enum  {
	DEJA_DUP_CONFIG_LIST_DUMMY_PROPERTY
};
DejaDupConfigList* deja_dup_config_list_new (const gchar* key, const gchar* ns);
DejaDupConfigList* deja_dup_config_list_construct (GType object_type, const gchar* key, const gchar* ns);
static gchar* deja_dup_config_list_convert_key_to_a11y_name (const gchar* key);
static gboolean deja_dup_config_list_on_key_press_event (DejaDupConfigList* self, GtkWidget* w, GdkEventKey* e);
static void deja_dup_config_list_handle_remove (DejaDupConfigList* self);
static void deja_dup_config_list_real_set_from_config_data_free (gpointer _data);
static void deja_dup_config_list_real_set_from_config (DejaDupConfigWidget* base, GAsyncReadyCallback _callback_, gpointer _user_data_);
static gboolean deja_dup_config_list_real_set_from_config_co (DejaDupConfigListSetFromConfigData* _data_);
const gchar* deja_dup_config_widget_get_key (DejaDupConfigWidget* self);
void deja_dup_config_list_write_to_config (DejaDupConfigList* self, GtkTreeModel* model, GtkTreePath* path);
static void _deja_dup_config_list_write_to_config_gtk_tree_model_row_deleted (GtkTreeModel* _sender, GtkTreePath* path, gpointer self);
static void deja_dup_config_list_set_from_config_ready (GObject* source_object, GAsyncResult* _res_, gpointer _user_data_);
static void deja_dup_config_list_handle_selection_change (DejaDupConfigList* self, GtkTreeSelection* sel);
static void deja_dup_config_list_handle_add (DejaDupConfigList* self);
void deja_dup_destroy_widget (GtkWidget* w);
static void _vala_array_add7 (const gchar*** array, int* length, int* size, const gchar* value);
gchar** deja_dup_config_list_get_files (DejaDupConfigList* self, int* result_length1);
static void _vala_array_add8 (gchar*** array, int* length, int* size, gchar* value);
static GtkTreeIter* _gtk_tree_iter_dup (GtkTreeIter* self);
static void _g_list_free__g_free0_ (GList* self);
static void _gtk_tree_path_free0_ (gpointer var);
static void _g_list_free__gtk_tree_path_free0_ (GList* self);
static GObject * deja_dup_config_list_constructor (GType type, guint n_construct_properties, GObjectConstructParam * construct_properties);
void deja_dup_config_widget_set_mnemonic_widget (DejaDupConfigWidget* self, GtkWidget* value);
static void _deja_dup_config_list_handle_add_gtk_tool_button_clicked (GtkToolButton* _sender, gpointer self);
static void _deja_dup_config_list_handle_remove_gtk_tool_button_clicked (GtkToolButton* _sender, gpointer self);
static gboolean _deja_dup_config_list_on_key_press_event_gtk_widget_key_press_event (GtkWidget* _sender, GdkEventKey* event, gpointer self);
void deja_dup_config_widget_set_from_config (DejaDupConfigWidget* self, GAsyncReadyCallback _callback_, gpointer _user_data_);
void deja_dup_config_widget_set_from_config_finish (DejaDupConfigWidget* self, GAsyncResult* _res_);
static void _deja_dup_config_list_handle_selection_change_gtk_tree_selection_changed (GtkTreeSelection* _sender, gpointer self);
static void deja_dup_config_list_finalize (GObject* obj);
static void _vala_array_destroy (gpointer array, gint array_length, GDestroyNotify destroy_func);
static void _vala_array_free (gpointer array, gint array_length, GDestroyNotify destroy_func);
static gint _vala_array_length (gpointer array);


DejaDupConfigListStore* deja_dup_config_list_store_construct (GType object_type, DejaDupConfigList* list) {
	DejaDupConfigListStore * self = NULL;
	DejaDupConfigList* _tmp0_;
	g_return_val_if_fail (list != NULL, NULL);
	_tmp0_ = list;
	self = (DejaDupConfigListStore*) g_object_new (object_type, "list", _tmp0_, NULL);
	return self;
}


DejaDupConfigListStore* deja_dup_config_list_store_new (DejaDupConfigList* list) {
	return deja_dup_config_list_store_construct (DEJA_DUP_TYPE_CONFIG_LIST_STORE, list);
}


static void _g_free0_ (gpointer var) {
	var = (g_free (var), NULL);
}


static void _g_slist_free__g_free0_ (GSList* self) {
	g_slist_foreach (self, (GFunc) _g_free0_, NULL);
	g_slist_free (self);
}


static gboolean deja_dup_config_list_store_real_drag_data_received (GtkTreeDragDest* base, GtkTreePath* dest, GtkSelectionData* selection_data) {
	DejaDupConfigListStore * self;
	gboolean result = FALSE;
	GtkTreePath* _tmp0_;
	GtkSelectionData* _tmp1_;
	gboolean _tmp2_ = FALSE;
	GtkSelectionData* _tmp3_;
	gchar** _tmp4_;
	gchar** _tmp5_ = NULL;
	gchar** uris;
	gint uris_length1;
	gint _uris_size_;
	gchar** _tmp6_;
	gint _tmp6__length1;
	GSList* files;
	gchar** _tmp7_;
	gint _tmp7__length1;
	DejaDupConfigList* _tmp23_;
	GSList* _tmp24_;
	gboolean _tmp25_ = FALSE;
	GError * _inner_error_ = NULL;
	self = (DejaDupConfigListStore*) base;
	g_return_val_if_fail (dest != NULL, FALSE);
	g_return_val_if_fail (selection_data != NULL, FALSE);
	_tmp0_ = dest;
	_tmp1_ = selection_data;
	_tmp2_ = deja_dup_config_list_store_gtk_tree_drag_dest_parent_iface->drag_data_received ((GtkTreeDragDest*) GTK_LIST_STORE (self), _tmp0_, _tmp1_);
	if (_tmp2_) {
		result = TRUE;
		return result;
	}
	_tmp3_ = selection_data;
	_tmp5_ = _tmp4_ = gtk_selection_data_get_uris (_tmp3_);
	uris = _tmp5_;
	uris_length1 = _vala_array_length (_tmp4_);
	_uris_size_ = uris_length1;
	_tmp6_ = uris;
	_tmp6__length1 = uris_length1;
	if (_tmp6_ == NULL) {
		result = FALSE;
		uris = (_vala_array_free (uris, uris_length1, (GDestroyNotify) g_free), NULL);
		return result;
	}
	files = NULL;
	_tmp7_ = uris;
	_tmp7__length1 = uris_length1;
	{
		gchar** uri_collection = NULL;
		gint uri_collection_length1 = 0;
		gint _uri_collection_size_ = 0;
		gint uri_it = 0;
		uri_collection = _tmp7_;
		uri_collection_length1 = _tmp7__length1;
		for (uri_it = 0; uri_it < _tmp7__length1; uri_it = uri_it + 1) {
			const gchar* uri = NULL;
			uri = uri_collection[uri_it];
			{
				const gchar* _tmp8_;
				gchar* _tmp9_ = NULL;
				gchar* _tmp10_;
				gboolean _tmp11_;
				_tmp8_ = uri;
				_tmp9_ = g_uri_parse_scheme (_tmp8_);
				_tmp10_ = _tmp9_;
				_tmp11_ = g_strcmp0 (_tmp10_, "file") != 0;
				_g_free0 (_tmp10_);
				if (_tmp11_) {
					continue;
				}
				{
					const gchar* _tmp12_;
					gchar* _tmp13_ = NULL;
					gchar* file;
					const gchar* _tmp14_;
					const gchar* _tmp15_;
					GFile* _tmp16_ = NULL;
					GFile* gfile;
					GFile* _tmp17_;
					GFileType _tmp18_ = 0;
					_tmp12_ = uri;
					_tmp13_ = g_filename_from_uri (_tmp12_, NULL, &_inner_error_);
					file = _tmp13_;
					if (_inner_error_ != NULL) {
						if (_inner_error_->domain == G_CONVERT_ERROR) {
							goto __catch2_g_convert_error;
						}
						__g_slist_free__g_free0_0 (files);
						uris = (_vala_array_free (uris, uris_length1, (GDestroyNotify) g_free), NULL);
						g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
						g_clear_error (&_inner_error_);
						return FALSE;
					}
					_tmp14_ = file;
					if (_tmp14_ == NULL) {
						_g_free0 (file);
						continue;
					}
					_tmp15_ = file;
					_tmp16_ = g_file_new_for_path (_tmp15_);
					gfile = _tmp16_;
					_tmp17_ = gfile;
					_tmp18_ = g_file_query_file_type (_tmp17_, G_FILE_QUERY_INFO_NONE, NULL);
					if (_tmp18_ == G_FILE_TYPE_DIRECTORY) {
						const gchar* _tmp19_;
						gchar* _tmp20_;
						_tmp19_ = file;
						_tmp20_ = g_strdup (_tmp19_);
						files = g_slist_append (files, _tmp20_);
					}
					_g_object_unref0 (gfile);
					_g_free0 (file);
				}
				goto __finally2;
				__catch2_g_convert_error:
				{
					GError* e = NULL;
					GError* _tmp21_;
					const gchar* _tmp22_;
					e = _inner_error_;
					_inner_error_ = NULL;
					_tmp21_ = e;
					_tmp22_ = _tmp21_->message;
					g_warning ("ConfigList.vala:65: %s", _tmp22_);
					_g_error_free0 (e);
				}
				__finally2:
				if (_inner_error_ != NULL) {
					__g_slist_free__g_free0_0 (files);
					uris = (_vala_array_free (uris, uris_length1, (GDestroyNotify) g_free), NULL);
					g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
					g_clear_error (&_inner_error_);
					return FALSE;
				}
			}
		}
	}
	_tmp23_ = self->priv->_list;
	_tmp24_ = files;
	_tmp25_ = deja_dup_config_list_add_files (_tmp23_, _tmp24_);
	result = _tmp25_;
	__g_slist_free__g_free0_0 (files);
	uris = (_vala_array_free (uris, uris_length1, (GDestroyNotify) g_free), NULL);
	return result;
}


static gboolean deja_dup_config_list_store_real_drag_data_get (GtkTreeDragSource* base, GtkTreePath* path, GtkSelectionData* selection_data) {
	DejaDupConfigListStore * self;
	gboolean result = FALSE;
	GtkTreePath* _tmp0_;
	GtkSelectionData* _tmp1_;
	gboolean _tmp2_ = FALSE;
	GtkTreeIter iter = {0};
	GtkTreePath* _tmp3_;
	GtkTreeIter _tmp4_ = {0};
	gboolean _tmp5_ = FALSE;
	gchar* file = NULL;
	GtkTreeIter _tmp6_;
	gchar* uri = NULL;
	const gchar* _tmp12_;
	gchar* _tmp13_;
	gchar** _tmp14_ = NULL;
	gchar** uris;
	gint uris_length1;
	gint _uris_size_;
	GtkSelectionData* _tmp15_;
	gchar** _tmp16_;
	gint _tmp16__length1;
	gboolean _tmp17_ = FALSE;
	GError * _inner_error_ = NULL;
	self = (DejaDupConfigListStore*) base;
	g_return_val_if_fail (path != NULL, FALSE);
	g_return_val_if_fail (selection_data != NULL, FALSE);
	_tmp0_ = path;
	_tmp1_ = selection_data;
	_tmp2_ = deja_dup_config_list_store_gtk_tree_drag_source_parent_iface->drag_data_get ((GtkTreeDragSource*) GTK_LIST_STORE (self), _tmp0_, _tmp1_);
	if (_tmp2_) {
		result = TRUE;
		return result;
	}
	_tmp3_ = path;
	_tmp5_ = gtk_tree_model_get_iter ((GtkTreeModel*) self, &_tmp4_, _tmp3_);
	iter = _tmp4_;
	if (!_tmp5_) {
		result = FALSE;
		return result;
	}
	_tmp6_ = iter;
	gtk_tree_model_get ((GtkTreeModel*) self, &_tmp6_, 0, &file, -1);
	{
		const gchar* _tmp7_;
		gchar* _tmp8_ = NULL;
		gchar* _tmp9_;
		_tmp7_ = file;
		_tmp8_ = g_filename_to_uri (_tmp7_, NULL, &_inner_error_);
		_tmp9_ = _tmp8_;
		if (_inner_error_ != NULL) {
			if (_inner_error_->domain == G_CONVERT_ERROR) {
				goto __catch3_g_convert_error;
			}
			_g_free0 (uri);
			_g_free0 (file);
			g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
			g_clear_error (&_inner_error_);
			return FALSE;
		}
		_g_free0 (uri);
		uri = _tmp9_;
	}
	goto __finally3;
	__catch3_g_convert_error:
	{
		GError* e = NULL;
		GError* _tmp10_;
		const gchar* _tmp11_;
		e = _inner_error_;
		_inner_error_ = NULL;
		_tmp10_ = e;
		_tmp11_ = _tmp10_->message;
		g_warning ("ConfigList.vala:90: %s", _tmp11_);
		result = FALSE;
		_g_error_free0 (e);
		_g_free0 (uri);
		_g_free0 (file);
		return result;
	}
	__finally3:
	if (_inner_error_ != NULL) {
		_g_free0 (uri);
		_g_free0 (file);
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return FALSE;
	}
	_tmp12_ = uri;
	_tmp13_ = g_strdup (_tmp12_);
	_tmp14_ = g_new0 (gchar*, 1 + 1);
	_tmp14_[0] = _tmp13_;
	uris = _tmp14_;
	uris_length1 = 1;
	_uris_size_ = uris_length1;
	_tmp15_ = selection_data;
	_tmp16_ = uris;
	_tmp16__length1 = uris_length1;
	_tmp17_ = gtk_selection_data_set_uris (_tmp15_, _tmp16_);
	result = _tmp17_;
	uris = (_vala_array_free (uris, uris_length1, (GDestroyNotify) g_free), NULL);
	_g_free0 (uri);
	_g_free0 (file);
	return result;
}


DejaDupConfigList* deja_dup_config_list_store_get_list (DejaDupConfigListStore* self) {
	DejaDupConfigList* result;
	DejaDupConfigList* _tmp0_;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = self->priv->_list;
	result = _tmp0_;
	return result;
}


static gpointer _g_object_ref0 (gpointer self) {
	return self ? g_object_ref (self) : NULL;
}


static void deja_dup_config_list_store_set_list (DejaDupConfigListStore* self, DejaDupConfigList* value) {
	DejaDupConfigList* _tmp0_;
	DejaDupConfigList* _tmp1_;
	g_return_if_fail (self != NULL);
	_tmp0_ = value;
	_tmp1_ = _g_object_ref0 (_tmp0_);
	_g_object_unref0 (self->priv->_list);
	self->priv->_list = _tmp1_;
	g_object_notify ((GObject *) self, "list");
}


static GObject * deja_dup_config_list_store_constructor (GType type, guint n_construct_properties, GObjectConstructParam * construct_properties) {
	GObject * obj;
	GObjectClass * parent_class;
	DejaDupConfigListStore * self;
	GType* _tmp0_ = NULL;
	GType* types;
	gint types_length1;
	gint _types_size_;
	GType* _tmp1_;
	gint _tmp1__length1;
	parent_class = G_OBJECT_CLASS (deja_dup_config_list_store_parent_class);
	obj = parent_class->constructor (type, n_construct_properties, construct_properties);
	self = DEJA_DUP_CONFIG_LIST_STORE (obj);
	_tmp0_ = g_new0 (GType, 3);
	_tmp0_[0] = G_TYPE_STRING;
	_tmp0_[1] = G_TYPE_STRING;
	_tmp0_[2] = G_TYPE_ICON;
	types = _tmp0_;
	types_length1 = 3;
	_types_size_ = types_length1;
	_tmp1_ = types;
	_tmp1__length1 = types_length1;
	gtk_list_store_set_column_types ((GtkListStore*) self, _tmp1__length1, _tmp1_);
	types = (g_free (types), NULL);
	return obj;
}


static void deja_dup_config_list_store_class_init (DejaDupConfigListStoreClass * klass) {
	deja_dup_config_list_store_parent_class = g_type_class_peek_parent (klass);
	g_type_class_add_private (klass, sizeof (DejaDupConfigListStorePrivate));
	G_OBJECT_CLASS (klass)->get_property = _vala_deja_dup_config_list_store_get_property;
	G_OBJECT_CLASS (klass)->set_property = _vala_deja_dup_config_list_store_set_property;
	G_OBJECT_CLASS (klass)->constructor = deja_dup_config_list_store_constructor;
	G_OBJECT_CLASS (klass)->finalize = deja_dup_config_list_store_finalize;
	g_object_class_install_property (G_OBJECT_CLASS (klass), DEJA_DUP_CONFIG_LIST_STORE_LIST, g_param_spec_object ("list", "list", "list", DEJA_DUP_TYPE_CONFIG_LIST, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE | G_PARAM_WRITABLE | G_PARAM_CONSTRUCT_ONLY));
}


static void deja_dup_config_list_store_gtk_tree_drag_dest_interface_init (GtkTreeDragDestIface * iface) {
	deja_dup_config_list_store_gtk_tree_drag_dest_parent_iface = g_type_interface_peek_parent (iface);
	iface->drag_data_received = (gboolean (*)(GtkTreeDragDest*, GtkTreePath*, GtkSelectionData*)) deja_dup_config_list_store_real_drag_data_received;
}


static void deja_dup_config_list_store_gtk_tree_drag_source_interface_init (GtkTreeDragSourceIface * iface) {
	deja_dup_config_list_store_gtk_tree_drag_source_parent_iface = g_type_interface_peek_parent (iface);
	iface->drag_data_get = (gboolean (*)(GtkTreeDragSource*, GtkTreePath*, GtkSelectionData*)) deja_dup_config_list_store_real_drag_data_get;
}


static void deja_dup_config_list_store_instance_init (DejaDupConfigListStore * self) {
	self->priv = DEJA_DUP_CONFIG_LIST_STORE_GET_PRIVATE (self);
}


static void deja_dup_config_list_store_finalize (GObject* obj) {
	DejaDupConfigListStore * self;
	self = DEJA_DUP_CONFIG_LIST_STORE (obj);
	_g_object_unref0 (self->priv->_list);
	G_OBJECT_CLASS (deja_dup_config_list_store_parent_class)->finalize (obj);
}


GType deja_dup_config_list_store_get_type (void) {
	static volatile gsize deja_dup_config_list_store_type_id__volatile = 0;
	if (g_once_init_enter (&deja_dup_config_list_store_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (DejaDupConfigListStoreClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) deja_dup_config_list_store_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (DejaDupConfigListStore), 0, (GInstanceInitFunc) deja_dup_config_list_store_instance_init, NULL };
		static const GInterfaceInfo gtk_tree_drag_dest_info = { (GInterfaceInitFunc) deja_dup_config_list_store_gtk_tree_drag_dest_interface_init, (GInterfaceFinalizeFunc) NULL, NULL};
		static const GInterfaceInfo gtk_tree_drag_source_info = { (GInterfaceInitFunc) deja_dup_config_list_store_gtk_tree_drag_source_interface_init, (GInterfaceFinalizeFunc) NULL, NULL};
		GType deja_dup_config_list_store_type_id;
		deja_dup_config_list_store_type_id = g_type_register_static (GTK_TYPE_LIST_STORE, "DejaDupConfigListStore", &g_define_type_info, 0);
		g_type_add_interface_static (deja_dup_config_list_store_type_id, GTK_TYPE_TREE_DRAG_DEST, &gtk_tree_drag_dest_info);
		g_type_add_interface_static (deja_dup_config_list_store_type_id, GTK_TYPE_TREE_DRAG_SOURCE, &gtk_tree_drag_source_info);
		g_once_init_leave (&deja_dup_config_list_store_type_id__volatile, deja_dup_config_list_store_type_id);
	}
	return deja_dup_config_list_store_type_id__volatile;
}


static void _vala_deja_dup_config_list_store_get_property (GObject * object, guint property_id, GValue * value, GParamSpec * pspec) {
	DejaDupConfigListStore * self;
	self = DEJA_DUP_CONFIG_LIST_STORE (object);
	switch (property_id) {
		case DEJA_DUP_CONFIG_LIST_STORE_LIST:
		g_value_set_object (value, deja_dup_config_list_store_get_list (self));
		break;
		default:
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
		break;
	}
}


static void _vala_deja_dup_config_list_store_set_property (GObject * object, guint property_id, const GValue * value, GParamSpec * pspec) {
	DejaDupConfigListStore * self;
	self = DEJA_DUP_CONFIG_LIST_STORE (object);
	switch (property_id) {
		case DEJA_DUP_CONFIG_LIST_STORE_LIST:
		deja_dup_config_list_store_set_list (self, g_value_get_object (value));
		break;
		default:
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
		break;
	}
}


DejaDupConfigList* deja_dup_config_list_construct (GType object_type, const gchar* key, const gchar* ns) {
	DejaDupConfigList * self = NULL;
	const gchar* _tmp0_;
	const gchar* _tmp1_;
	g_return_val_if_fail (key != NULL, NULL);
	g_return_val_if_fail (ns != NULL, NULL);
	_tmp0_ = key;
	_tmp1_ = ns;
	self = (DejaDupConfigList*) g_object_new (object_type, "key", _tmp0_, "ns", _tmp1_, NULL);
	return self;
}


DejaDupConfigList* deja_dup_config_list_new (const gchar* key, const gchar* ns) {
	return deja_dup_config_list_construct (DEJA_DUP_TYPE_CONFIG_LIST, key, ns);
}


static gunichar string_get_char (const gchar* self, glong index) {
	gunichar result = 0U;
	glong _tmp0_;
	gunichar _tmp1_ = 0U;
	g_return_val_if_fail (self != NULL, 0U);
	_tmp0_ = index;
	_tmp1_ = g_utf8_get_char (((gchar*) self) + _tmp0_);
	result = _tmp1_;
	return result;
}


static gchar* deja_dup_config_list_convert_key_to_a11y_name (const gchar* key) {
	gchar* result = NULL;
	GString* _tmp0_;
	GString* name;
	gboolean next_upper;
	gint i;
	gunichar ch = 0U;
	GString* _tmp11_;
	const gchar* _tmp12_;
	gchar* _tmp13_;
	g_return_val_if_fail (key != NULL, NULL);
	_tmp0_ = g_string_new ("");
	name = _tmp0_;
	next_upper = TRUE;
	i = 0;
	while (TRUE) {
		const gchar* _tmp1_;
		gint _tmp2_;
		gunichar _tmp3_ = 0U;
		gunichar _tmp4_;
		gunichar _tmp5_;
		gboolean _tmp6_;
		GString* _tmp9_;
		gunichar _tmp10_;
		_tmp1_ = key;
		_tmp2_ = i;
		i = _tmp2_ + 1;
		_tmp3_ = string_get_char (_tmp1_, (glong) _tmp2_);
		ch = _tmp3_;
		_tmp4_ = ch;
		if (!(_tmp4_ != ((gunichar) 0))) {
			break;
		}
		_tmp5_ = ch;
		if (_tmp5_ == ((gunichar) '-')) {
			next_upper = TRUE;
			continue;
		}
		_tmp6_ = next_upper;
		if (_tmp6_) {
			gunichar _tmp7_;
			gunichar _tmp8_ = 0U;
			_tmp7_ = ch;
			_tmp8_ = g_unichar_toupper (_tmp7_);
			ch = _tmp8_;
			next_upper = FALSE;
		}
		_tmp9_ = name;
		_tmp10_ = ch;
		g_string_append_unichar (_tmp9_, _tmp10_);
	}
	_tmp11_ = name;
	_tmp12_ = _tmp11_->str;
	_tmp13_ = g_strdup (_tmp12_);
	result = _tmp13_;
	_g_string_free0 (name);
	return result;
}


static gboolean deja_dup_config_list_on_key_press_event (DejaDupConfigList* self, GtkWidget* w, GdkEventKey* e) {
	gboolean result = FALSE;
	GdkModifierType _tmp0_ = 0;
	guint modifiers;
	gboolean _tmp1_ = FALSE;
	gboolean _tmp2_ = FALSE;
	GdkEventKey _tmp3_;
	guint _tmp4_;
	gboolean _tmp7_;
	gboolean _tmp11_;
	g_return_val_if_fail (self != NULL, FALSE);
	g_return_val_if_fail (w != NULL, FALSE);
	g_return_val_if_fail (e != NULL, FALSE);
	_tmp0_ = gtk_accelerator_get_default_mod_mask ();
	modifiers = (guint) _tmp0_;
	_tmp3_ = *e;
	_tmp4_ = _tmp3_.keyval;
	if (_tmp4_ == ((guint) 0xffff)) {
		_tmp2_ = TRUE;
	} else {
		GdkEventKey _tmp5_;
		guint _tmp6_;
		_tmp5_ = *e;
		_tmp6_ = _tmp5_.keyval;
		_tmp2_ = _tmp6_ == ((guint) 0xff9f);
	}
	_tmp7_ = _tmp2_;
	if (_tmp7_) {
		GdkEventKey _tmp8_;
		GdkModifierType _tmp9_;
		guint _tmp10_;
		_tmp8_ = *e;
		_tmp9_ = _tmp8_.state;
		_tmp10_ = modifiers;
		_tmp1_ = (_tmp9_ & _tmp10_) == 0;
	} else {
		_tmp1_ = FALSE;
	}
	_tmp11_ = _tmp1_;
	if (_tmp11_) {
		deja_dup_config_list_handle_remove (self);
		result = TRUE;
		return result;
	} else {
		result = FALSE;
		return result;
	}
}


static void deja_dup_config_list_real_set_from_config_data_free (gpointer _data) {
	DejaDupConfigListSetFromConfigData* _data_;
	_data_ = _data;
	_g_object_unref0 (_data_->self);
	g_slice_free (DejaDupConfigListSetFromConfigData, _data_);
}


static void deja_dup_config_list_real_set_from_config (DejaDupConfigWidget* base, GAsyncReadyCallback _callback_, gpointer _user_data_) {
	DejaDupConfigList * self;
	DejaDupConfigListSetFromConfigData* _data_;
	DejaDupConfigList* _tmp0_;
	self = (DejaDupConfigList*) base;
	_data_ = g_slice_new0 (DejaDupConfigListSetFromConfigData);
	_data_->_async_result = g_simple_async_result_new (G_OBJECT (self), _callback_, _user_data_, deja_dup_config_list_real_set_from_config);
	g_simple_async_result_set_op_res_gpointer (_data_->_async_result, _data_, deja_dup_config_list_real_set_from_config_data_free);
	_tmp0_ = _g_object_ref0 (self);
	_data_->self = _tmp0_;
	deja_dup_config_list_real_set_from_config_co (_data_);
}


static void deja_dup_config_list_real_set_from_config_finish (DejaDupConfigWidget* base, GAsyncResult* _res_) {
	DejaDupConfigListSetFromConfigData* _data_;
	_data_ = g_simple_async_result_get_op_res_gpointer (G_SIMPLE_ASYNC_RESULT (_res_));
}


static void _deja_dup_config_list_write_to_config_gtk_tree_model_row_deleted (GtkTreeModel* _sender, GtkTreePath* path, gpointer self) {
	deja_dup_config_list_write_to_config (self, _sender, path);
}


static void deja_dup_config_list_set_from_config_ready (GObject* source_object, GAsyncResult* _res_, gpointer _user_data_) {
	DejaDupConfigListSetFromConfigData* _data_;
	_data_ = _user_data_;
	_data_->_source_object_ = source_object;
	_data_->_res_ = _res_;
	deja_dup_config_list_real_set_from_config_co (_data_);
}


static gboolean deja_dup_config_list_real_set_from_config_co (DejaDupConfigListSetFromConfigData* _data_) {
	switch (_data_->_state_) {
		case 0:
		goto _state_0;
		case 1:
		goto _state_1;
		default:
		g_assert_not_reached ();
	}
	_state_0:
	_data_->_tmp0_ = ((DejaDupConfigWidget*) _data_->self)->settings;
	_data_->_tmp1_ = deja_dup_config_widget_get_key ((DejaDupConfigWidget*) _data_->self);
	_data_->_tmp2_ = _data_->_tmp1_;
	_data_->_tmp3_ = NULL;
	_data_->_tmp3_ = g_settings_get_value ((GSettings*) _data_->_tmp0_, _data_->_tmp2_);
	_data_->slist_val = _data_->_tmp3_;
	_data_->_tmp4_ = _data_->slist_val;
	memset (&_data_->_tmp5_, 0, sizeof (size_t));
	_data_->_tmp6_ = NULL;
	_data_->_tmp6_ = g_variant_get_strv (_data_->_tmp4_, &_data_->_tmp5_);
	_data_->slist = _data_->_tmp6_;
	_data_->slist_length1 = _data_->_tmp5_;
	_data_->_slist_size_ = _data_->slist_length1;
	_data_->_tmp7_ = _data_->slist;
	_data_->_tmp7__length1 = _data_->slist_length1;
	_data_->_tmp8_ = 0;
	_data_->_tmp9_ = NULL;
	_data_->_tmp9_ = deja_dup_parse_dir_list (_data_->_tmp7_, _data_->_tmp7__length1, &_data_->_tmp8_);
	_data_->list = _data_->_tmp9_;
	_data_->list_length1 = _data_->_tmp8_;
	_data_->_list_size_ = _data_->list_length1;
	_data_->_tmp10_ = _data_->self->priv->tree;
	g_object_get ((GObject*) _data_->_tmp10_, "model", &_data_->model, NULL);
	_data_->_tmp11_ = _data_->model;
	_data_->_tmp12_ = 0U;
	g_signal_parse_name ("row-deleted", GTK_TYPE_TREE_MODEL, &_data_->_tmp12_, NULL, FALSE);
	g_signal_handlers_disconnect_matched ((GtkTreeModel*) _data_->_tmp11_, G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _data_->_tmp12_, 0, NULL, (GCallback) _deja_dup_config_list_write_to_config_gtk_tree_model_row_deleted, _data_->self);
	_data_->_tmp13_ = _data_->model;
	gtk_list_store_clear (_data_->_tmp13_);
	_data_->_tmp14_ = _data_->model;
	g_signal_connect_object ((GtkTreeModel*) _data_->_tmp14_, "row-deleted", (GCallback) _deja_dup_config_list_write_to_config_gtk_tree_model_row_deleted, _data_->self, 0);
	_data_->i = 0;
	_data_->_tmp15_ = NULL;
	_data_->_tmp15_ = deja_dup_get_trash_path ();
	_data_->_tmp16_ = _data_->_tmp15_;
	_data_->_tmp17_ = NULL;
	_data_->_tmp17_ = g_file_new_for_path (_data_->_tmp16_);
	_data_->_tmp18_ = _data_->_tmp17_;
	_g_free0 (_data_->_tmp16_);
	_data_->trash = _data_->_tmp18_;
	_data_->_tmp19_ = _data_->list;
	_data_->_tmp19__length1 = _data_->list_length1;
	{
		_data_->f_collection_length1 = 0;
		_data_->_f_collection_size_ = 0;
		_data_->f_collection = _data_->_tmp19_;
		_data_->f_collection_length1 = _data_->_tmp19__length1;
		for (_data_->f_it = 0; _data_->f_it < _data_->_tmp19__length1; _data_->f_it = _data_->f_it + 1) {
			_data_->_tmp20_ = _g_object_ref0 (_data_->f_collection[_data_->f_it]);
			_data_->f = _data_->_tmp20_;
			{
				_data_->_tmp21_ = _data_->f;
				_data_->_state_ = 1;
				deja_dup_get_nickname (_data_->_tmp21_, deja_dup_config_list_set_from_config_ready, _data_);
				return FALSE;
				_state_1:
				_data_->_tmp22_ = NULL;
				_data_->_tmp22_ = deja_dup_get_nickname_finish (_data_->_res_);
				_data_->s = _data_->_tmp22_;
				_data_->_tmp23_ = _data_->model;
				_data_->_tmp24_ = _data_->i;
				_data_->i = _data_->_tmp24_ + 1;
				_data_->_tmp25_ = _data_->f;
				_data_->_tmp26_ = NULL;
				_data_->_tmp26_ = g_file_get_path (_data_->_tmp25_);
				_data_->_tmp27_ = _data_->_tmp26_;
				_data_->_tmp28_ = _data_->s;
				memset (&_data_->_tmp29_, 0, sizeof (GtkTreeIter));
				gtk_list_store_insert_with_values (_data_->_tmp23_, &_data_->_tmp29_, _data_->_tmp24_, 0, _data_->_tmp27_, 1, _data_->_tmp28_, -1);
				_data_->iter = _data_->_tmp29_;
				_g_free0 (_data_->_tmp27_);
				_data_->icon = NULL;
				_data_->_tmp30_ = _data_->f;
				_data_->_tmp31_ = _data_->trash;
				_data_->_tmp32_ = FALSE;
				_data_->_tmp32_ = g_file_equal (_data_->_tmp30_, _data_->_tmp31_);
				if (_data_->_tmp32_) {
					_data_->_tmp33_ = (GThemedIcon*) g_themed_icon_new ("user-trash");
					_g_object_unref0 (_data_->icon);
					_data_->icon = (GIcon*) _data_->_tmp33_;
					_data_->_tmp34_ = _data_->icon;
					g_themed_icon_append_name (G_THEMED_ICON (_data_->_tmp34_), "folder");
				} else {
					{
						_data_->_tmp35_ = _data_->f;
						_data_->_tmp36_ = NULL;
						_data_->_tmp36_ = g_file_query_info (_data_->_tmp35_, G_FILE_ATTRIBUTE_STANDARD_ICON, G_FILE_QUERY_INFO_NONE, NULL, &_data_->_inner_error_);
						_data_->info = _data_->_tmp36_;
						if (_data_->_inner_error_ != NULL) {
							goto __catch4_g_error;
						}
						_data_->_tmp37_ = _data_->info;
						_data_->_tmp38_ = NULL;
						_data_->_tmp38_ = g_file_info_get_icon (_data_->_tmp37_);
						_data_->_tmp39_ = _g_object_ref0 (_data_->_tmp38_);
						_g_object_unref0 (_data_->icon);
						_data_->icon = _data_->_tmp39_;
						_g_object_unref0 (_data_->info);
					}
					goto __finally4;
					__catch4_g_error:
					{
						_data_->err = _data_->_inner_error_;
						_data_->_inner_error_ = NULL;
						_data_->_tmp40_ = _data_->err;
						_data_->_tmp41_ = _data_->_tmp40_->message;
						g_warning ("ConfigList.vala:260: %s\n", _data_->_tmp41_);
						_g_error_free0 (_data_->err);
					}
					__finally4:
					if (_data_->_inner_error_ != NULL) {
						_g_object_unref0 (_data_->icon);
						_g_free0 (_data_->s);
						_g_object_unref0 (_data_->f);
						_g_object_unref0 (_data_->trash);
						_g_object_unref0 (_data_->model);
						_data_->list = (_vala_array_free (_data_->list, _data_->list_length1, (GDestroyNotify) g_object_unref), NULL);
						_data_->slist = (g_free (_data_->slist), NULL);
						_g_variant_unref0 (_data_->slist_val);
						g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error_->message, g_quark_to_string (_data_->_inner_error_->domain), _data_->_inner_error_->code);
						g_clear_error (&_data_->_inner_error_);
						return FALSE;
					}
				}
				_data_->_tmp42_ = _data_->icon;
				if (_data_->_tmp42_ != NULL) {
					_data_->_tmp43_ = _data_->model;
					_data_->_tmp44_ = _data_->iter;
					_data_->_tmp45_ = _data_->icon;
					gtk_list_store_set (_data_->_tmp43_, &_data_->_tmp44_, 2, _data_->_tmp45_, -1);
				}
				_g_object_unref0 (_data_->icon);
				_g_free0 (_data_->s);
				_g_object_unref0 (_data_->f);
			}
		}
	}
	_g_object_unref0 (_data_->trash);
	_g_object_unref0 (_data_->model);
	_data_->list = (_vala_array_free (_data_->list, _data_->list_length1, (GDestroyNotify) g_object_unref), NULL);
	_data_->slist = (g_free (_data_->slist), NULL);
	_g_variant_unref0 (_data_->slist_val);
	if (_data_->_state_ == 0) {
		g_simple_async_result_complete_in_idle (_data_->_async_result);
	} else {
		g_simple_async_result_complete (_data_->_async_result);
	}
	g_object_unref (_data_->_async_result);
	return FALSE;
}


static void deja_dup_config_list_handle_selection_change (DejaDupConfigList* self, GtkTreeSelection* sel) {
	GtkTreeSelection* _tmp0_;
	gint _tmp1_ = 0;
	gboolean empty;
	GtkToolButton* _tmp2_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (sel != NULL);
	_tmp0_ = sel;
	_tmp1_ = gtk_tree_selection_count_selected_rows (_tmp0_);
	empty = _tmp1_ == 0;
	_tmp2_ = self->priv->remove_button;
	gtk_widget_set_sensitive ((GtkWidget*) _tmp2_, !empty);
}


static void deja_dup_config_list_handle_add (DejaDupConfigList* self) {
	const gchar* _tmp0_ = NULL;
	GtkWidget* _tmp1_ = NULL;
	GtkFileChooserDialog* _tmp2_;
	GtkFileChooserDialog* _tmp3_;
	GtkFileChooserDialog* dlg;
	GtkFileChooserDialog* _tmp4_;
	GtkFileChooserDialog* _tmp5_;
	gint _tmp6_ = 0;
	GtkFileChooserDialog* _tmp8_;
	GSList* _tmp9_ = NULL;
	GSList* files;
	GtkFileChooserDialog* _tmp10_;
	GSList* _tmp11_;
	g_return_if_fail (self != NULL);
	_tmp0_ = _ ("Choose folders");
	_tmp1_ = gtk_widget_get_ancestor ((GtkWidget*) self, GTK_TYPE_WINDOW);
	_tmp2_ = (GtkFileChooserDialog*) gtk_file_chooser_dialog_new (_tmp0_, GTK_IS_WINDOW (_tmp1_) ? ((GtkWindow*) _tmp1_) : NULL, GTK_FILE_CHOOSER_ACTION_SELECT_FOLDER, GTK_STOCK_CANCEL, GTK_RESPONSE_CANCEL, GTK_STOCK_OPEN, GTK_RESPONSE_ACCEPT, NULL);
	_tmp3_ = g_object_ref_sink (_tmp2_);
	dlg = _tmp3_;
	_tmp4_ = dlg;
	gtk_file_chooser_set_select_multiple ((GtkFileChooser*) _tmp4_, TRUE);
	_tmp5_ = dlg;
	_tmp6_ = gtk_dialog_run ((GtkDialog*) _tmp5_);
	if (_tmp6_ != ((gint) GTK_RESPONSE_ACCEPT)) {
		GtkFileChooserDialog* _tmp7_;
		_tmp7_ = dlg;
		deja_dup_destroy_widget ((GtkWidget*) _tmp7_);
		_g_object_unref0 (dlg);
		return;
	}
	_tmp8_ = dlg;
	_tmp9_ = gtk_file_chooser_get_filenames ((GtkFileChooser*) _tmp8_);
	files = _tmp9_;
	_tmp10_ = dlg;
	deja_dup_destroy_widget ((GtkWidget*) _tmp10_);
	_tmp11_ = files;
	deja_dup_config_list_add_files (self, _tmp11_);
	__g_slist_free__g_free0_0 (files);
	_g_object_unref0 (dlg);
}


static void _vala_array_add7 (const gchar*** array, int* length, int* size, const gchar* value) {
	if ((*length) == (*size)) {
		*size = (*size) ? (2 * (*size)) : 4;
		*array = g_renew (const gchar*, *array, *size);
	}
	(*array)[(*length)++] = value;
}


gboolean deja_dup_config_list_add_files (DejaDupConfigList* self, GSList* files) {
	gboolean result = FALSE;
	GSList* _tmp0_;
	DejaDupSimpleSettings* _tmp1_;
	const gchar* _tmp2_;
	const gchar* _tmp3_;
	GVariant* _tmp4_ = NULL;
	GVariant* slist_val;
	GVariant* _tmp5_;
	size_t _tmp6_;
	const gchar** _tmp7_ = NULL;
	const gchar** slist;
	gint slist_length1;
	gint _slist_size_;
	gboolean rv;
	GSList* _tmp8_;
	gboolean _tmp26_;
	g_return_val_if_fail (self != NULL, FALSE);
	_tmp0_ = files;
	if (_tmp0_ == NULL) {
		result = FALSE;
		return result;
	}
	_tmp1_ = ((DejaDupConfigWidget*) self)->settings;
	_tmp2_ = deja_dup_config_widget_get_key ((DejaDupConfigWidget*) self);
	_tmp3_ = _tmp2_;
	_tmp4_ = g_settings_get_value ((GSettings*) _tmp1_, _tmp3_);
	slist_val = _tmp4_;
	_tmp5_ = slist_val;
	_tmp7_ = g_variant_get_strv (_tmp5_, &_tmp6_);
	slist = _tmp7_;
	slist_length1 = _tmp6_;
	_slist_size_ = slist_length1;
	rv = FALSE;
	_tmp8_ = files;
	{
		GSList* file_collection = NULL;
		GSList* file_it = NULL;
		file_collection = _tmp8_;
		for (file_it = file_collection; file_it != NULL; file_it = file_it->next) {
			gchar* _tmp9_;
			gchar* file = NULL;
			_tmp9_ = g_strdup ((const gchar*) file_it->data);
			file = _tmp9_;
			{
				const gchar* _tmp10_;
				GFile* _tmp11_ = NULL;
				GFile* folder;
				gboolean found;
				const gchar** _tmp12_;
				gint _tmp12__length1;
				gboolean _tmp22_;
				_tmp10_ = file;
				_tmp11_ = g_file_new_for_path (_tmp10_);
				folder = _tmp11_;
				found = FALSE;
				_tmp12_ = slist;
				_tmp12__length1 = slist_length1;
				{
					const gchar** s_collection = NULL;
					gint s_collection_length1 = 0;
					gint _s_collection_size_ = 0;
					gint s_it = 0;
					s_collection = _tmp12_;
					s_collection_length1 = _tmp12__length1;
					for (s_it = 0; s_it < _tmp12__length1; s_it = s_it + 1) {
						gchar* _tmp13_;
						gchar* s = NULL;
						_tmp13_ = g_strdup ((gchar*) s_collection[s_it]);
						s = _tmp13_;
						{
							const gchar* _tmp14_;
							GFile* _tmp15_ = NULL;
							GFile* sfile;
							gboolean _tmp16_ = FALSE;
							GFile* _tmp17_;
							gboolean _tmp21_;
							_tmp14_ = s;
							_tmp15_ = deja_dup_parse_dir (_tmp14_);
							sfile = _tmp15_;
							_tmp17_ = sfile;
							if (_tmp17_ != NULL) {
								GFile* _tmp18_;
								GFile* _tmp19_;
								gboolean _tmp20_ = FALSE;
								_tmp18_ = sfile;
								_tmp19_ = folder;
								_tmp20_ = g_file_equal (_tmp18_, _tmp19_);
								_tmp16_ = _tmp20_;
							} else {
								_tmp16_ = FALSE;
							}
							_tmp21_ = _tmp16_;
							if (_tmp21_) {
								found = TRUE;
								_g_object_unref0 (sfile);
								_g_free0 (s);
								break;
							}
							_g_object_unref0 (sfile);
							_g_free0 (s);
						}
					}
				}
				_tmp22_ = found;
				if (!_tmp22_) {
					const gchar** _tmp23_;
					gint _tmp23__length1;
					GFile* _tmp24_;
					gchar* _tmp25_ = NULL;
					_tmp23_ = slist;
					_tmp23__length1 = slist_length1;
					_tmp24_ = folder;
					_tmp25_ = g_file_get_parse_name (_tmp24_);
					_vala_array_add7 (&slist, &slist_length1, &_slist_size_, _tmp25_);
					rv = TRUE;
				}
				_g_object_unref0 (folder);
				_g_free0 (file);
			}
		}
	}
	_tmp26_ = rv;
	if (_tmp26_) {
		DejaDupSimpleSettings* _tmp27_;
		const gchar* _tmp28_;
		const gchar* _tmp29_;
		const gchar** _tmp30_;
		gint _tmp30__length1;
		GVariant* _tmp31_;
		GVariant* _tmp32_;
		_tmp27_ = ((DejaDupConfigWidget*) self)->settings;
		_tmp28_ = deja_dup_config_widget_get_key ((DejaDupConfigWidget*) self);
		_tmp29_ = _tmp28_;
		_tmp30_ = slist;
		_tmp30__length1 = slist_length1;
		_tmp31_ = g_variant_new_strv (_tmp30_, _tmp30__length1);
		_tmp32_ = g_variant_ref_sink (_tmp31_);
		deja_dup_simple_settings_set_value (_tmp27_, _tmp29_, _tmp32_);
		_g_variant_unref0 (_tmp32_);
	}
	result = rv;
	slist = (g_free (slist), NULL);
	_g_variant_unref0 (slist_val);
	return result;
}


gchar** deja_dup_config_list_get_files (DejaDupConfigList* self, int* result_length1) {
	gchar** result = NULL;
	DejaDupSimpleSettings* _tmp0_;
	const gchar* _tmp1_;
	const gchar* _tmp2_;
	GVariant* _tmp3_ = NULL;
	GVariant* slist_val;
	size_t _tmp4_;
	gchar** _tmp5_ = NULL;
	gchar** _tmp6_;
	gint _tmp6__length1;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = ((DejaDupConfigWidget*) self)->settings;
	_tmp1_ = deja_dup_config_widget_get_key ((DejaDupConfigWidget*) self);
	_tmp2_ = _tmp1_;
	_tmp3_ = g_settings_get_value ((GSettings*) _tmp0_, _tmp2_);
	slist_val = _tmp3_;
	_tmp5_ = g_variant_dup_strv (slist_val, &_tmp4_);
	_tmp6_ = _tmp5_;
	_tmp6__length1 = _tmp4_;
	if (result_length1) {
		*result_length1 = _tmp6__length1;
	}
	result = _tmp6_;
	_g_variant_unref0 (slist_val);
	return result;
}


static void _vala_array_add8 (gchar*** array, int* length, int* size, gchar* value) {
	if ((*length) == (*size)) {
		*size = (*size) ? (2 * (*size)) : 4;
		*array = g_renew (gchar*, *array, (*size) + 1);
	}
	(*array)[(*length)++] = value;
	(*array)[*length] = NULL;
}


void deja_dup_config_list_write_to_config (DejaDupConfigList* self, GtkTreeModel* model, GtkTreePath* path) {
	GtkTreeIter iter = {0};
	gchar** _tmp0_ = NULL;
	gchar** paths;
	gint paths_length1;
	gint _paths_size_;
	GtkTreeModel* _tmp1_;
	GtkTreeIter _tmp2_ = {0};
	gboolean _tmp3_ = FALSE;
	DejaDupSimpleSettings* _tmp13_;
	const gchar* _tmp14_;
	const gchar* _tmp15_;
	gchar** _tmp16_;
	gint _tmp16__length1;
	GVariant* _tmp17_;
	GVariant* _tmp18_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (model != NULL);
	_tmp0_ = g_new0 (gchar*, 0 + 1);
	paths = _tmp0_;
	paths_length1 = 0;
	_paths_size_ = paths_length1;
	_tmp1_ = model;
	_tmp3_ = gtk_tree_model_get_iter_first (_tmp1_, &_tmp2_);
	iter = _tmp2_;
	if (_tmp3_) {
		{
			gboolean _tmp4_;
			_tmp4_ = TRUE;
			while (TRUE) {
				gboolean _tmp5_;
				gchar* current = NULL;
				GtkTreeModel* _tmp8_;
				GtkTreeIter _tmp9_;
				gchar** _tmp10_;
				gint _tmp10__length1;
				const gchar* _tmp11_;
				gchar* _tmp12_;
				_tmp5_ = _tmp4_;
				if (!_tmp5_) {
					GtkTreeModel* _tmp6_;
					gboolean _tmp7_ = FALSE;
					_tmp6_ = model;
					_tmp7_ = gtk_tree_model_iter_next (_tmp6_, &iter);
					if (!_tmp7_) {
						break;
					}
				}
				_tmp4_ = FALSE;
				_tmp8_ = model;
				_tmp9_ = iter;
				gtk_tree_model_get (_tmp8_, &_tmp9_, 0, &current, -1);
				_tmp10_ = paths;
				_tmp10__length1 = paths_length1;
				_tmp11_ = current;
				_tmp12_ = g_strdup (_tmp11_);
				_vala_array_add8 (&paths, &paths_length1, &_paths_size_, _tmp12_);
				_g_free0 (current);
			}
		}
	}
	_tmp13_ = ((DejaDupConfigWidget*) self)->settings;
	_tmp14_ = deja_dup_config_widget_get_key ((DejaDupConfigWidget*) self);
	_tmp15_ = _tmp14_;
	_tmp16_ = paths;
	_tmp16__length1 = paths_length1;
	_tmp17_ = g_variant_new_strv ((const gchar**) _tmp16_, _tmp16__length1);
	_tmp18_ = g_variant_ref_sink (_tmp17_);
	deja_dup_simple_settings_set_value (_tmp13_, _tmp15_, _tmp18_);
	_g_variant_unref0 (_tmp18_);
	paths = (_vala_array_free (paths, paths_length1, (GDestroyNotify) g_free), NULL);
}


static gpointer _gtk_tree_path_copy0 (gpointer self) {
	return self ? gtk_tree_path_copy (self) : NULL;
}


static GtkTreeIter* _gtk_tree_iter_dup (GtkTreeIter* self) {
	GtkTreeIter* dup;
	dup = g_new0 (GtkTreeIter, 1);
	memcpy (dup, self, sizeof (GtkTreeIter));
	return dup;
}


static gpointer __gtk_tree_iter_dup0 (gpointer self) {
	return self ? _gtk_tree_iter_dup (self) : NULL;
}


static void _g_list_free__g_free0_ (GList* self) {
	g_list_foreach (self, (GFunc) _g_free0_, NULL);
	g_list_free (self);
}


static void _gtk_tree_path_free0_ (gpointer var) {
	(var == NULL) ? NULL : (var = (gtk_tree_path_free (var), NULL));
}


static void _g_list_free__gtk_tree_path_free0_ (GList* self) {
	g_list_foreach (self, (GFunc) _gtk_tree_path_free0_, NULL);
	g_list_free (self);
}


static void deja_dup_config_list_handle_remove (DejaDupConfigList* self) {
	GtkTreeView* _tmp0_;
	GtkTreeSelection* _tmp1_ = NULL;
	GtkTreeSelection* _tmp2_;
	GtkTreeSelection* sel;
	GtkTreeModel* model = NULL;
	GtkTreeSelection* _tmp3_;
	GtkTreeModel* _tmp4_ = NULL;
	GList* _tmp5_ = NULL;
	GList* paths;
	GList* iters;
	GList* _tmp6_;
	GtkTreeModel* _tmp14_;
	guint _tmp15_ = 0U;
	GList* _tmp16_;
	GtkTreeModel* _tmp19_;
	GtkTreeModel* _tmp20_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->tree;
	_tmp1_ = gtk_tree_view_get_selection (_tmp0_);
	_tmp2_ = _g_object_ref0 (_tmp1_);
	sel = _tmp2_;
	_tmp3_ = sel;
	_tmp5_ = gtk_tree_selection_get_selected_rows (_tmp3_, &_tmp4_);
	model = _tmp4_;
	paths = _tmp5_;
	iters = NULL;
	_tmp6_ = paths;
	{
		GList* path_collection = NULL;
		GList* path_it = NULL;
		path_collection = _tmp6_;
		for (path_it = path_collection; path_it != NULL; path_it = path_it->next) {
			GtkTreePath* _tmp7_;
			GtkTreePath* path = NULL;
			_tmp7_ = _gtk_tree_path_copy0 ((GtkTreePath*) path_it->data);
			path = _tmp7_;
			{
				GtkTreeIter iter = {0};
				GtkTreeModel* _tmp8_;
				GtkTreePath* _tmp9_;
				GtkTreeIter _tmp10_ = {0};
				gboolean _tmp11_ = FALSE;
				_tmp8_ = model;
				_tmp9_ = path;
				_tmp11_ = gtk_tree_model_get_iter (_tmp8_, &_tmp10_, _tmp9_);
				iter = _tmp10_;
				if (_tmp11_) {
					GtkTreeIter _tmp12_;
					GtkTreeIter* _tmp13_;
					_tmp12_ = iter;
					_tmp13_ = __gtk_tree_iter_dup0 (&_tmp12_);
					iters = g_list_prepend (iters, _tmp13_);
				}
				_gtk_tree_path_free0 (path);
			}
		}
	}
	_tmp14_ = model;
	g_signal_parse_name ("row-deleted", GTK_TYPE_TREE_MODEL, &_tmp15_, NULL, FALSE);
	g_signal_handlers_disconnect_matched (_tmp14_, G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp15_, 0, NULL, (GCallback) _deja_dup_config_list_write_to_config_gtk_tree_model_row_deleted, self);
	_tmp16_ = iters;
	{
		GList* iter_collection = NULL;
		GList* iter_it = NULL;
		iter_collection = _tmp16_;
		for (iter_it = iter_collection; iter_it != NULL; iter_it = iter_it->next) {
			GtkTreeIter iter = {0};
			iter = *((GtkTreeIter*) iter_it->data);
			{
				GtkTreeModel* _tmp17_;
				GtkTreeIter _tmp18_;
				_tmp17_ = model;
				_tmp18_ = iter;
				gtk_list_store_remove (GTK_IS_LIST_STORE (_tmp17_) ? ((GtkListStore*) _tmp17_) : NULL, &_tmp18_);
			}
		}
	}
	_tmp19_ = model;
	g_signal_connect_object (_tmp19_, "row-deleted", (GCallback) _deja_dup_config_list_write_to_config_gtk_tree_model_row_deleted, self, 0);
	_tmp20_ = model;
	deja_dup_config_list_write_to_config (self, _tmp20_, NULL);
	__g_list_free__g_free0_0 (iters);
	__g_list_free__gtk_tree_path_free0_0 (paths);
	_g_object_unref0 (sel);
}


static void _deja_dup_config_list_handle_add_gtk_tool_button_clicked (GtkToolButton* _sender, gpointer self) {
	deja_dup_config_list_handle_add (self);
}


static void _deja_dup_config_list_handle_remove_gtk_tool_button_clicked (GtkToolButton* _sender, gpointer self) {
	deja_dup_config_list_handle_remove (self);
}


static gboolean _deja_dup_config_list_on_key_press_event_gtk_widget_key_press_event (GtkWidget* _sender, GdkEventKey* event, gpointer self) {
	gboolean result;
	result = deja_dup_config_list_on_key_press_event (self, _sender, event);
	return result;
}


static void _deja_dup_config_list_handle_selection_change_gtk_tree_selection_changed (GtkTreeSelection* _sender, gpointer self) {
	deja_dup_config_list_handle_selection_change (self, _sender);
}


static GObject * deja_dup_config_list_constructor (GType type, guint n_construct_properties, GObjectConstructParam * construct_properties) {
	GObject * obj;
	GObjectClass * parent_class;
	DejaDupConfigList * self;
	DejaDupConfigListStore* _tmp0_;
	DejaDupConfigListStore* model;
	GtkTreeView* _tmp1_;
	GtkTreeView* _tmp2_;
	GtkTreeView* _tmp3_;
	DejaDupConfigListStore* _tmp4_;
	GtkTreeView* _tmp5_;
	GtkTreeView* _tmp6_;
	const gchar* _tmp7_;
	const gchar* _tmp8_;
	gchar* _tmp9_ = NULL;
	gchar* a11y_name;
	GtkTreeView* _tmp10_;
	AtkObject* _tmp11_ = NULL;
	AtkObject* _tmp12_;
	AtkObject* accessible;
	AtkObject* _tmp13_;
	GtkTreeView* _tmp16_;
	GtkCellRendererPixbuf* _tmp17_;
	GtkCellRendererPixbuf* _tmp18_;
	GtkCellRendererText* _tmp19_;
	GtkCellRendererText* _tmp20_;
	GtkCellRendererText* renderer;
	GtkTreeView* _tmp21_;
	GtkCellRendererText* _tmp22_;
	GtkTargetEntry* _tmp23_ = NULL;
	GtkTargetEntry* targets;
	gint targets_length1;
	gint _targets_size_;
	GtkTargetEntry* _tmp24_;
	gint _tmp24__length1;
	GtkTargetEntry* _tmp25_;
	gint _tmp25__length1;
	GtkTargetEntry* _tmp26_;
	gint _tmp26__length1;
	const gchar* _tmp27_;
	const gchar* _tmp28_;
	GQuark _tmp29_ = 0U;
	GtkTreeView* _tmp30_;
	GtkTargetEntry* _tmp31_;
	gint _tmp31__length1;
	GtkTargetEntry* _tmp32_;
	gint _tmp32__length1;
	GtkTreeView* _tmp33_;
	GtkTargetEntry* _tmp34_;
	gint _tmp34__length1;
	DejaDupConfigListStore* _tmp35_;
	GtkScrolledWindow* _tmp36_;
	GtkScrolledWindow* _tmp37_;
	GtkScrolledWindow* scroll;
	GtkScrolledWindow* _tmp38_;
	GtkScrolledWindow* _tmp39_;
	GtkScrolledWindow* _tmp40_;
	GtkScrolledWindow* _tmp41_;
	GtkTreeView* _tmp42_;
	GtkToolbar* _tmp43_;
	GtkToolbar* _tmp44_;
	GtkToolbar* tbar;
	GtkToolbar* _tmp45_;
	GtkToolbar* _tmp46_;
	GtkToolbar* _tmp47_;
	GtkScrolledWindow* _tmp48_;
	GtkStyleContext* _tmp49_ = NULL;
	GtkToolbar* _tmp50_;
	GtkStyleContext* _tmp51_ = NULL;
	GtkToolbar* _tmp52_;
	GtkStyleContext* _tmp53_ = NULL;
	const gchar* _tmp54_ = NULL;
	GtkToolButton* _tmp55_;
	GtkToolButton* _tmp56_;
	GtkToolButton* _tmp57_;
	const gchar* _tmp58_ = NULL;
	GtkToolButton* _tmp59_;
	GtkToolButton* _tmp60_;
	GtkToolButton* _tmp61_;
	AtkObject* _tmp62_ = NULL;
	AtkObject* _tmp63_;
	AtkObject* _tmp64_;
	GtkToolbar* _tmp69_;
	GtkToolButton* _tmp70_;
	const gchar* _tmp71_ = NULL;
	GtkToolButton* _tmp72_;
	GtkToolButton* _tmp73_;
	GtkToolButton* _tmp74_;
	const gchar* _tmp75_ = NULL;
	GtkToolButton* _tmp76_;
	GtkToolButton* _tmp77_;
	GtkToolButton* _tmp78_;
	AtkObject* _tmp79_ = NULL;
	AtkObject* _tmp80_;
	AtkObject* _tmp81_;
	GtkToolbar* _tmp86_;
	GtkToolButton* _tmp87_;
	GtkBox* _tmp88_;
	GtkBox* _tmp89_;
	GtkBox* vbox;
	GtkBox* _tmp90_;
	GtkScrolledWindow* _tmp91_;
	GtkBox* _tmp92_;
	GtkToolbar* _tmp93_;
	GtkBox* _tmp94_;
	GtkTreeView* _tmp95_;
	GtkTreeSelection* _tmp96_ = NULL;
	GtkTreeSelection* _tmp97_;
	GtkTreeSelection* selection;
	GtkTreeSelection* _tmp98_;
	GtkTreeSelection* _tmp99_;
	GtkTreeSelection* _tmp100_;
	parent_class = G_OBJECT_CLASS (deja_dup_config_list_parent_class);
	obj = parent_class->constructor (type, n_construct_properties, construct_properties);
	self = DEJA_DUP_CONFIG_LIST (obj);
	_tmp0_ = deja_dup_config_list_store_new (self);
	model = _tmp0_;
	_tmp1_ = (GtkTreeView*) gtk_tree_view_new ();
	_tmp2_ = g_object_ref_sink (_tmp1_);
	_g_object_unref0 (self->priv->tree);
	self->priv->tree = _tmp2_;
	_tmp3_ = self->priv->tree;
	_tmp4_ = model;
	gtk_tree_view_set_model (_tmp3_, (GtkTreeModel*) _tmp4_);
	_tmp5_ = self->priv->tree;
	gtk_tree_view_set_headers_visible (_tmp5_, FALSE);
	_tmp6_ = self->priv->tree;
	deja_dup_config_widget_set_mnemonic_widget ((DejaDupConfigWidget*) self, (GtkWidget*) _tmp6_);
	_tmp7_ = deja_dup_config_widget_get_key ((DejaDupConfigWidget*) self);
	_tmp8_ = _tmp7_;
	_tmp9_ = deja_dup_config_list_convert_key_to_a11y_name (_tmp8_);
	a11y_name = _tmp9_;
	_tmp10_ = self->priv->tree;
	_tmp11_ = gtk_widget_get_accessible ((GtkWidget*) _tmp10_);
	_tmp12_ = _g_object_ref0 (_tmp11_);
	accessible = _tmp12_;
	_tmp13_ = accessible;
	if (_tmp13_ != NULL) {
		AtkObject* _tmp14_;
		const gchar* _tmp15_;
		_tmp14_ = accessible;
		_tmp15_ = a11y_name;
		atk_object_set_name (_tmp14_, _tmp15_);
	}
	_tmp16_ = self->priv->tree;
	_tmp17_ = (GtkCellRendererPixbuf*) gtk_cell_renderer_pixbuf_new ();
	_tmp18_ = g_object_ref_sink (_tmp17_);
	gtk_tree_view_insert_column_with_attributes (_tmp16_, -1, NULL, (GtkCellRenderer*) _tmp18_, "gicon", 2, NULL);
	_g_object_unref0 (_tmp18_);
	_tmp19_ = (GtkCellRendererText*) gtk_cell_renderer_text_new ();
	_tmp20_ = g_object_ref_sink (_tmp19_);
	renderer = _tmp20_;
	_tmp21_ = self->priv->tree;
	_tmp22_ = renderer;
	gtk_tree_view_insert_column_with_attributes (_tmp21_, -1, NULL, (GtkCellRenderer*) _tmp22_, "text", 1, NULL);
	_tmp23_ = g_new0 (GtkTargetEntry, 1);
	targets = _tmp23_;
	targets_length1 = 1;
	_targets_size_ = targets_length1;
	_tmp24_ = targets;
	_tmp24__length1 = targets_length1;
	_tmp24_[0].target = "text/uri-list";
	_tmp25_ = targets;
	_tmp25__length1 = targets_length1;
	_tmp25_[0].flags = (guint) GTK_TARGET_OTHER_WIDGET;
	_tmp26_ = targets;
	_tmp26__length1 = targets_length1;
	_tmp27_ = deja_dup_config_widget_get_key ((DejaDupConfigWidget*) self);
	_tmp28_ = _tmp27_;
	_tmp29_ = g_quark_from_string (_tmp28_);
	_tmp26_[0].info = (guint) _tmp29_;
	_tmp30_ = self->priv->tree;
	_tmp31_ = targets;
	_tmp31__length1 = targets_length1;
	gtk_tree_view_enable_model_drag_dest (_tmp30_, _tmp31_, _tmp31__length1, GDK_ACTION_COPY);
	_tmp32_ = targets;
	_tmp32__length1 = targets_length1;
	_tmp32_[0].flags = (guint) GTK_TARGET_SAME_APP;
	_tmp33_ = self->priv->tree;
	_tmp34_ = targets;
	_tmp34__length1 = targets_length1;
	gtk_tree_view_enable_model_drag_source (_tmp33_, GDK_BUTTON1_MASK, _tmp34_, _tmp34__length1, GDK_ACTION_MOVE);
	_tmp35_ = model;
	g_signal_connect_object ((GtkTreeModel*) _tmp35_, "row-deleted", (GCallback) _deja_dup_config_list_write_to_config_gtk_tree_model_row_deleted, self, 0);
	_tmp36_ = (GtkScrolledWindow*) gtk_scrolled_window_new (NULL, NULL);
	_tmp37_ = g_object_ref_sink (_tmp36_);
	scroll = _tmp37_;
	_tmp38_ = scroll;
	g_object_set (_tmp38_, "hscrollbar-policy", GTK_POLICY_AUTOMATIC, NULL);
	_tmp39_ = scroll;
	g_object_set (_tmp39_, "vscrollbar-policy", GTK_POLICY_AUTOMATIC, NULL);
	_tmp40_ = scroll;
	gtk_scrolled_window_set_shadow_type (_tmp40_, GTK_SHADOW_IN);
	_tmp41_ = scroll;
	_tmp42_ = self->priv->tree;
	gtk_container_add ((GtkContainer*) _tmp41_, (GtkWidget*) _tmp42_);
	_tmp43_ = (GtkToolbar*) gtk_toolbar_new ();
	_tmp44_ = g_object_ref_sink (_tmp43_);
	tbar = _tmp44_;
	_tmp45_ = tbar;
	gtk_toolbar_set_style (_tmp45_, GTK_TOOLBAR_ICONS);
	_tmp46_ = tbar;
	gtk_toolbar_set_icon_size (_tmp46_, GTK_ICON_SIZE_SMALL_TOOLBAR);
	_tmp47_ = tbar;
	gtk_toolbar_set_show_arrow (_tmp47_, FALSE);
	_tmp48_ = scroll;
	_tmp49_ = gtk_widget_get_style_context ((GtkWidget*) _tmp48_);
	gtk_style_context_set_junction_sides (_tmp49_, GTK_JUNCTION_BOTTOM);
	_tmp50_ = tbar;
	_tmp51_ = gtk_widget_get_style_context ((GtkWidget*) _tmp50_);
	gtk_style_context_add_class (_tmp51_, GTK_STYLE_CLASS_INLINE_TOOLBAR);
	_tmp52_ = tbar;
	_tmp53_ = gtk_widget_get_style_context ((GtkWidget*) _tmp52_);
	gtk_style_context_set_junction_sides (_tmp53_, GTK_JUNCTION_TOP);
	_tmp54_ = _ ("_Add");
	_tmp55_ = (GtkToolButton*) gtk_tool_button_new (NULL, _tmp54_);
	_tmp56_ = g_object_ref_sink (_tmp55_);
	_g_object_unref0 (self->priv->add_button);
	self->priv->add_button = _tmp56_;
	_tmp57_ = self->priv->add_button;
	_tmp58_ = _ ("Add");
	gtk_tool_item_set_tooltip_text ((GtkToolItem*) _tmp57_, _tmp58_);
	_tmp59_ = self->priv->add_button;
	gtk_tool_button_set_icon_name (_tmp59_, "list-add-symbolic");
	_tmp60_ = self->priv->add_button;
	g_signal_connect_object (_tmp60_, "clicked", (GCallback) _deja_dup_config_list_handle_add_gtk_tool_button_clicked, self, 0);
	_tmp61_ = self->priv->add_button;
	_tmp62_ = gtk_widget_get_accessible ((GtkWidget*) _tmp61_);
	_tmp63_ = _g_object_ref0 (_tmp62_);
	_g_object_unref0 (accessible);
	accessible = _tmp63_;
	_tmp64_ = accessible;
	if (_tmp64_ != NULL) {
		AtkObject* _tmp65_;
		const gchar* _tmp66_;
		gchar* _tmp67_;
		gchar* _tmp68_;
		_tmp65_ = accessible;
		_tmp66_ = a11y_name;
		_tmp67_ = g_strconcat (_tmp66_, "Add", NULL);
		_tmp68_ = _tmp67_;
		atk_object_set_name (_tmp65_, _tmp68_);
		_g_free0 (_tmp68_);
	}
	_tmp69_ = tbar;
	_tmp70_ = self->priv->add_button;
	gtk_toolbar_insert (_tmp69_, (GtkToolItem*) _tmp70_, -1);
	_tmp71_ = _ ("_Remove");
	_tmp72_ = (GtkToolButton*) gtk_tool_button_new (NULL, _tmp71_);
	_tmp73_ = g_object_ref_sink (_tmp72_);
	_g_object_unref0 (self->priv->remove_button);
	self->priv->remove_button = _tmp73_;
	_tmp74_ = self->priv->remove_button;
	_tmp75_ = _ ("Remove");
	gtk_tool_item_set_tooltip_text ((GtkToolItem*) _tmp74_, _tmp75_);
	_tmp76_ = self->priv->remove_button;
	gtk_tool_button_set_icon_name (_tmp76_, "list-remove-symbolic");
	_tmp77_ = self->priv->remove_button;
	g_signal_connect_object (_tmp77_, "clicked", (GCallback) _deja_dup_config_list_handle_remove_gtk_tool_button_clicked, self, 0);
	_tmp78_ = self->priv->remove_button;
	_tmp79_ = gtk_widget_get_accessible ((GtkWidget*) _tmp78_);
	_tmp80_ = _g_object_ref0 (_tmp79_);
	_g_object_unref0 (accessible);
	accessible = _tmp80_;
	_tmp81_ = accessible;
	if (_tmp81_ != NULL) {
		AtkObject* _tmp82_;
		const gchar* _tmp83_;
		gchar* _tmp84_;
		gchar* _tmp85_;
		_tmp82_ = accessible;
		_tmp83_ = a11y_name;
		_tmp84_ = g_strconcat (_tmp83_, "Remove", NULL);
		_tmp85_ = _tmp84_;
		atk_object_set_name (_tmp82_, _tmp85_);
		_g_free0 (_tmp85_);
	}
	_tmp86_ = tbar;
	_tmp87_ = self->priv->remove_button;
	gtk_toolbar_insert (_tmp86_, (GtkToolItem*) _tmp87_, -1);
	_tmp88_ = (GtkBox*) gtk_box_new (GTK_ORIENTATION_VERTICAL, 0);
	_tmp89_ = g_object_ref_sink (_tmp88_);
	vbox = _tmp89_;
	_tmp90_ = vbox;
	_tmp91_ = scroll;
	gtk_box_pack_start (_tmp90_, (GtkWidget*) _tmp91_, TRUE, TRUE, (guint) 0);
	_tmp92_ = vbox;
	_tmp93_ = tbar;
	gtk_box_pack_start (_tmp92_, (GtkWidget*) _tmp93_, FALSE, TRUE, (guint) 0);
	_tmp94_ = vbox;
	gtk_container_add ((GtkContainer*) self, (GtkWidget*) _tmp94_);
	_tmp95_ = self->priv->tree;
	_tmp96_ = gtk_tree_view_get_selection (_tmp95_);
	_tmp97_ = _g_object_ref0 (_tmp96_);
	selection = _tmp97_;
	_tmp98_ = selection;
	gtk_tree_selection_set_mode (_tmp98_, GTK_SELECTION_MULTIPLE);
	g_signal_connect_object ((GtkWidget*) self, "key-press-event", (GCallback) _deja_dup_config_list_on_key_press_event_gtk_widget_key_press_event, self, 0);
	deja_dup_config_widget_set_from_config ((DejaDupConfigWidget*) self, NULL, NULL);
	_tmp99_ = selection;
	deja_dup_config_list_handle_selection_change (self, _tmp99_);
	_tmp100_ = selection;
	g_signal_connect_object (_tmp100_, "changed", (GCallback) _deja_dup_config_list_handle_selection_change_gtk_tree_selection_changed, self, 0);
	_g_object_unref0 (selection);
	_g_object_unref0 (vbox);
	_g_object_unref0 (tbar);
	_g_object_unref0 (scroll);
	targets = (g_free (targets), NULL);
	_g_object_unref0 (renderer);
	_g_object_unref0 (accessible);
	_g_free0 (a11y_name);
	_g_object_unref0 (model);
	return obj;
}


static void deja_dup_config_list_class_init (DejaDupConfigListClass * klass) {
	deja_dup_config_list_parent_class = g_type_class_peek_parent (klass);
	g_type_class_add_private (klass, sizeof (DejaDupConfigListPrivate));
	DEJA_DUP_CONFIG_WIDGET_CLASS (klass)->set_from_config = deja_dup_config_list_real_set_from_config;
	DEJA_DUP_CONFIG_WIDGET_CLASS (klass)->set_from_config_finish = deja_dup_config_list_real_set_from_config_finish;
	G_OBJECT_CLASS (klass)->constructor = deja_dup_config_list_constructor;
	G_OBJECT_CLASS (klass)->finalize = deja_dup_config_list_finalize;
}


static void deja_dup_config_list_instance_init (DejaDupConfigList * self) {
	self->priv = DEJA_DUP_CONFIG_LIST_GET_PRIVATE (self);
}


static void deja_dup_config_list_finalize (GObject* obj) {
	DejaDupConfigList * self;
	self = DEJA_DUP_CONFIG_LIST (obj);
	_g_object_unref0 (self->priv->tree);
	_g_object_unref0 (self->priv->add_button);
	_g_object_unref0 (self->priv->remove_button);
	G_OBJECT_CLASS (deja_dup_config_list_parent_class)->finalize (obj);
}


GType deja_dup_config_list_get_type (void) {
	static volatile gsize deja_dup_config_list_type_id__volatile = 0;
	if (g_once_init_enter (&deja_dup_config_list_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (DejaDupConfigListClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) deja_dup_config_list_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (DejaDupConfigList), 0, (GInstanceInitFunc) deja_dup_config_list_instance_init, NULL };
		GType deja_dup_config_list_type_id;
		deja_dup_config_list_type_id = g_type_register_static (DEJA_DUP_TYPE_CONFIG_WIDGET, "DejaDupConfigList", &g_define_type_info, 0);
		g_once_init_leave (&deja_dup_config_list_type_id__volatile, deja_dup_config_list_type_id);
	}
	return deja_dup_config_list_type_id__volatile;
}


static void _vala_array_destroy (gpointer array, gint array_length, GDestroyNotify destroy_func) {
	if ((array != NULL) && (destroy_func != NULL)) {
		int i;
		for (i = 0; i < array_length; i = i + 1) {
			if (((gpointer*) array)[i] != NULL) {
				destroy_func (((gpointer*) array)[i]);
			}
		}
	}
}


static void _vala_array_free (gpointer array, gint array_length, GDestroyNotify destroy_func) {
	_vala_array_destroy (array, array_length, destroy_func);
	g_free (array);
}


static gint _vala_array_length (gpointer array) {
	int length;
	length = 0;
	if (array) {
		while (((gpointer*) array)[length]) {
			length++;
		}
	}
	return length;
}



